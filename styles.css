/* Design tokens â€“ OKLCH color space for predictable contrast */
:root{
  /* Base colors (dark theme default) */
  --bg: oklch(0.16 0.02 250);
  --fg: oklch(0.96 0.01 250);
  --muted: oklch(0.72 0.03 250);
  --card: oklch(0.19 0.02 250 / 0.72);

  /* Brand pair with accessible contrast and glow potential */
  --brand: oklch(0.78 0.17 230);
  --brand-2: oklch(0.75 0.17 310);

  /* Elevation + effects */
  --radius: 16px;
  --ring: 0 0 0 .18rem oklch(from var(--brand) calc(l + 0.12) c h / .45);
  --shadow-sm: 0 6px 16px rgba(0,0,0,.25);
  --shadow: 0 14px 36px rgba(0,0,0,.45);

  /* Fluid type scale */
  --step-0: clamp(.95rem, .9rem + .25vw, 1.05rem);
  --step-1: clamp(1.15rem, 1rem + .6vw, 1.45rem);
  --step-2: clamp(1.45rem, 1.1rem + 1.3vw, 1.95rem);
  --step-3: clamp(2rem, 1.2rem + 2.6vw, 2.9rem);
  --step-4: clamp(2.8rem, 1.4rem + 4vw, 3.9rem);

  /* Layout rhythm */
  --max-wrap: 1100px;
  --gutter: min(4vw, 28px);
}

/* Light theme */
@media (prefers-color-scheme: light){
  :root{
    --bg: oklch(0.98 0.01 250);
    --fg: oklch(0.16 0.02 250);
    --muted: oklch(0.42 0.03 250);
    --card: oklch(0.98 0.01 250 / .9);
    --shadow: 0 12px 28px rgba(0,0,0,.12);
  }
}

/* Base */
*{ box-sizing: border-box }
html, body{ height: 100% }
body{
  margin:0;
  color: var(--fg);
  font: 400 var(--step-0)/1.7 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Inter, Roboto, "Noto Sans", Arial, "Helvetica Neue";
  background:
    radial-gradient(1200px 600px at 20% -10%, oklch(from var(--brand) l c h / .08), transparent 60%),
    radial-gradient(1200px 600px at 80% -20%, oklch(from var(--brand-2) l c h / .08), transparent 60%),
    var(--bg);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}
img{ max-width:100%; height:auto; border-radius: calc(var(--radius) - 6px) }
a{ color: var(--brand); text-decoration-thickness: .08em; text-underline-offset: .18em }
a:hover{ color: oklch(from var(--brand) calc(l + 0.02) c h) }

.wrap{ width:min(var(--max-wrap), 92%); margin-inline:auto; padding-inline: var(--gutter) }
.skip-link{ position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden }
.skip-link:focus{ position:fixed; left:1rem; top:1rem; z-index:999; padding:.55rem .8rem; background:var(--card); border-radius:.6rem; box-shadow: var(--shadow-sm) }

/* Header */
.site-header{
  position: sticky; top:0; z-index:50;
  backdrop-filter: blur(16px) saturate(150%);
  background: color-mix(in oklab, var(--bg) 75%, transparent);
  border-bottom: 1px solid color-mix(in oklab, var(--fg) 10%, transparent);
}
.site-header .wrap{ display:flex; align-items:center; justify-content:space-between; padding:.8rem 0 }
.brand{ font-weight:800; font-size: var(--step-1); color: var(--fg); letter-spacing:.3px; text-decoration:none }
.site-nav ul{ list-style:none; display:flex; gap:.6rem; margin:0; padding:0 }
.icon-btn{
  background: linear-gradient(135deg, var(--brand), var(--brand-2));
  color:#061018;
  border:0; border-radius: 999px;
  padding:.5rem .8rem; cursor:pointer;
  box-shadow: 0 0 10px oklch(from var(--brand) l c h / .35), 0 0 10px oklch(from var(--brand-2) l c h / .35);
}
.icon-btn:focus-visible{ outline: var(--ring) }
.icon-btn:hover{ filter: brightness(1.05) }

/* Hero */
.hero{ padding: 4.5rem 0 2.2rem }
.display{
  font-size: var(--step-4); line-height:1.08; letter-spacing:.2px; margin:0;
  background: linear-gradient(90deg, var(--brand), var(--brand-2));
  -webkit-background-clip: text; background-clip:text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 0 22px oklch(from var(--brand-2) l c h / .35);
}
.lede{ color: var(--muted); font-size: var(--step-1); margin:.9rem 0 0 }

/* Sections */
.section{ padding: 2rem 0 }

/* Card grid with container queries */
.card-grid{
  display:grid; gap:1.1rem;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  content-visibility: auto;
  contain-intrinsic-size: 500px 800px;
  container-type: inline-size; /* enable container queries on children */
}
@container (min-width: 680px){
  .card-grid{ gap: 1.2rem }
}
@container (min-width: 980px){
  .card-grid{ gap: 1.4rem }
}

.card{
  background: var(--card);
  backdrop-filter: blur(16px) saturate(160%);
  border:1px solid color-mix(in oklab, var(--fg) 12%, transparent);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow: hidden;
  transform: translateY(10px);
  opacity: 0;
  transition: transform .45s cubic-bezier(.2,.8,.2,1), opacity .45s;
}
.card.revealed{ transform: translateY(0); opacity: 1 }

.card-media{ display:block; aspect-ratio: 16 / 9; overflow:hidden }
.card-media img{ width:100%; height:100%; object-fit:cover; display:block; filter: saturate(1.18) contrast(1.08) }
.card-body{ padding: 1rem }
.card-title{ margin:.15rem 0 .35rem; font-size: var(--step-1) }
.card-meta{ color: var(--muted); font-size:.96em }
.card-excerpt{ color: var(--fg) }
.card-tags{ margin-top:.6rem; display:flex; gap:.4rem; flex-wrap:wrap }
.card-tags a{
  font-size:.85em; padding:.22rem .55rem; border-radius:999px;
  border:1px solid color-mix(in oklab, var(--fg) 12%, transparent);
  text-decoration:none; color: var(--muted)
}
.card-tags a:hover{ border-color: color-mix(in oklab, var(--brand) 30%, transparent); color: var(--brand) }

/* Tag cloud */
.tag-cloud{ display:flex; gap:.6rem; flex-wrap:wrap }
.tag-cloud button{
  border:0; border-radius:999px; cursor:pointer;
  background: color-mix(in oklab, var(--brand) 18%, transparent);
  color: var(--fg); padding:.42rem .7rem;
}
.tag-cloud button[aria-pressed="true"]{
  background: var(--brand);
  color: oklch(0.14 0.02 245);
}

/* Article */
.article-main{ padding: 2rem 0 }
.post-header{ width:min(900px, 92%); margin-inline:auto }
.post-hero{ margin:1rem 0 2rem }
.toc{
  position: sticky; top: 5.2rem;
  border-left:2px solid color-mix(in oklab, var(--fg) 10%, transparent);
  padding-left:1rem; margin: 1.2rem 0;
  max-height: 60vh; overflow: auto;
}
.toc a{ color: var(--muted); text-decoration:none; display:block; padding:.2rem 0 }
.toc a[aria-current="true"]{ color: var(--brand) }

.prose{
  width:min(900px, 92%); margin: 2rem auto;
  font-size: var(--step-0);
}
.prose p{ margin: 0 0 1rem }
.prose h2{ font-size: var(--step-2); margin: 2rem 0 .6rem }
.prose h3{ font-size: var(--step-1); margin: 1.2rem 0 .4rem }
.prose blockquote{
  margin:1rem 0; padding:1rem 1.1rem;
  border-inline-start:3px solid var(--brand);
  background: color-mix(in oklab, var(--brand) 7%, transparent);
  border-radius:12px;
}
.prose code{
  background: color-mix(in oklab, var(--fg) 10%, transparent);
  padding:.08rem .35rem; border-radius:.4rem; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
}
.prose pre{
  padding:1rem; background: oklch(0.2 0.02 250); border-radius:12px; overflow:auto;
  box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--fg) 6%, transparent);
}
.prose img{ display:block; margin:1rem auto }

/* Reading progress */
.progress{ position: sticky; top:0; height:4px; background: transparent }
.progress span{ display:block; height:100%; background: linear-gradient(90deg, var(--brand), var(--brand-2)); width:0 }

/* Footer */
.site-footer{
  border-top:1px solid color-mix(in oklab, var(--fg) 8%, transparent);
  padding:2rem 0; color: var(--muted)
}

/* Motion preferences */
@media (prefers-reduced-motion: reduce){
  *{ animation: none!important; transition: none!important }
}
