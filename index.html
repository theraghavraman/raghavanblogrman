<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <meta name="description" content="Glassbook: a single-file accessible glassmorphic flipbook about science, philosophy, technology, literature." />
  <meta name="keywords" content="philosophy, science, technology, literature, flipbook, accessibility" />
  <meta name="author" content="Your Name" />
  <link rel="canonical" href="https://yourdomain.com/glassbook" />
  <link rel="icon" href="favicon.ico" sizes="any" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png"/>
  <title>Glassbook ‚Äî Science, Philosophy, Tech, Literature</title>
  <!-- Open Graph -->
  <meta property="og:title" content="Glassbook ‚Äî Science, Philosophy, Tech, Literature" />
  <meta property="og:type" content="website" />
  <meta property="og:description" content="Accessible flipbook for thinkers and readers." />
  <meta property="og:image" content="cover.png" />
  <meta property="og:url" content="https://yourdomain.com/glassbook" />
  <!-- CSS will be added in Part 2 -->
</head>
  <style>
    :root {
  --page-bg: #eef3ff;
  --ink: #0f1533;
  --muted: #4e5b86;
  --glass: rgba(255,255,255,0.22);
  --glass-strong: rgba(255,255,255,0.35);
  --edge: rgba(255,255,255,0.55);
  --border: rgba(20,24,40,0.14);
  --shadow: rgba(15,21,51,0.22);
  --primary: #2251ff;
  --accent-1: #63b3ed;
  --accent-2: #a78bfa;
  --accent-3: #f472b6;
  --accent-4: #34d399;
  --accent-5: #f6ad55;
  --radius: 18px;
  --focus: #2251ff;
  --contrast-bg: #fff;
  --contrast-ink: #0b0e22;
  --hud-h: 56px;
  --gutter: 16px;
  --book-w: min(1100px, 94vw);
  --book-h: min(720px, 80vh);
  --flip-dur: 0.8s;
  --font-menu: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --font-body: 'Merriweather', serif;
}

[data-theme='dark'] {
  --page-bg: #181e2e;
  --ink: #e6eaff;
  --muted: #abb6d4;
  --glass: rgba(24,30,46,0.55);
  --glass-strong: rgba(24,30,46,0.85);
  --edge: rgba(255,255,255,0.10);
  --border: rgba(230,234,255,0.2);
  --shadow: rgba(15,21,51,0.65);
  --contrast-bg: #16192f;
  --contrast-ink: #f2f6fd;
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

/* General body */
body {
  color: var(--ink);
  background: var(--page-bg);
  font-family: var(--font-body);
  margin: 0;
  min-height: 100vh;
  line-height: 1.62;
  transition: background 0.3s, color 0.3s;
  word-break: break-word;
}

/* Main layout */
.site-header, .site-footer {
  background: var(--glass-strong);
  border-bottom: 1px solid var(--border);
  box-shadow: 0 4px 24px var(--shadow);
  padding: 1.2em var(--gutter);
  border-radius: 0 0 var(--radius) var(--radius);
}

.site-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
}

.site-header nav ul,
.site-footer nav ul {
  display: flex;
  gap: 1.2em;
  list-style: none;
  padding: 0;
  margin: 0;
}

.skip-link {
  position: absolute;
  left: -100vw;
  top: 4px;
  background: var(--focus);
  color: #fff;
  padding: 0.5em 1em;
  z-index: 999;
}

.skip-link:focus {
  left: 1vw;
  outline: 3px dashed var(--focus);
}

h1, h2, h3, h4 {
  font-family: var(--font-menu);
  font-weight: 700;
  line-height: 1.15;
  margin-top: 0.2em;
  margin-bottom: 0.6em;
}
h1 { font-size: 2.35em; }
h2 { font-size: 1.46em; }
h3 { font-size: 1.1em; }
h4 { font-size: 1em; }

button, [role="button"], input[type="button"] {
  font: inherit;
  border: none;
  background: var(--accent-1);
  color: #fff;
  border-radius: var(--radius);
  padding: 0.45em 1.2em;
  cursor: pointer;
  box-shadow: 1px 3px 12px var(--shadow);
  transition: background 0.3s, color 0.3s, box-shadow 0.15s;
}

button:focus-visible,
input[type='search']:focus-visible,
textarea:focus-visible {
  outline: 3px solid var(--focus);
  outline-offset: 2px;
}

button[aria-pressed="true"] {
  background: var(--accent-2);
}

input, textarea {
  font: inherit;
  border: 1.2px solid var(--border);
  border-radius: var(--radius);
  background: var(--glass);
  color: var(--ink);
  padding: 0.4em 0.55em;
  margin-bottom: 1em;
  transition: border 0.22s;
}

input[type="search"] {
  width: min(210px, 54vw);
}

.flipbook {
  display: grid;
  gap: var(--gutter);
  grid-template-columns: 1fr;
  max-width: var(--book-w);
  min-height: var(--book-h);
  box-shadow: 0 6px 40px var(--shadow);
  background: var(--glass);
  border-radius: var(--radius);
  margin: 2em auto;
  padding: 2em;
}

.book-page {
  position: relative;
  padding: 2em 1.5em;
  background: var(--contrast-bg);
  color: var(--contrast-ink);
  border-radius: var(--radius);
  box-shadow: 0 2px 16px var(--shadow);
  margin-bottom: 2em;
}

.pagination {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2em;
  margin-bottom: 2em;
}

.page-indicator {
  font-size: 1.15em;
  font-family: var(--font-menu);
}

#utility-section {
  margin: 1.8em auto 0;
  display: flex;
  flex-direction: row;
  align-items: stretch;
  gap: 2em;
  max-width: var(--book-w);
  justify-content: flex-start;
}

#search-form {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  gap: 0.6em;
}

#search-results {
  display: none;
  background: var(--glass-strong);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  min-width: 240px;
  margin: 0.25em 0 0;
  position: absolute;
  z-index: 10;
}

#open-notes {
  margin-left: 1em;
}

dialog[open], #notes-modal[open] {
  display: block;
  background: var(--glass-strong);
  color: var(--ink);
  border: 2px solid var(--accent-2);
  border-radius: var(--radius);
  box-shadow: 0 2px 20px var(--shadow);
  width: clamp(250px, 40vw, 420px);
  padding: 1.5em 2em;
}

@media (max-width: 820px) {
  .flipbook {
    padding: 1em;
    box-shadow: 0 2px 22px var(--shadow);
  }
  .book-page {
    padding: 1em 0.7em;
    font-size: 0.98em;
  }
  #utility-section {
    flex-direction: column;
    gap: 0.8em;
  }
}

@media print {
  body, .flipbook, .book-page, .pagination, .site-header, .site-footer {
    background: #fff !important;
    color: #111 !important;
    box-shadow: none !important;
    border: none !important;
  }
  .site-header, .site-footer, .pagination, #utility-section, #notes-modal {
    display: none !important;
  }
  .flipbook {
    margin: 0;
    padding: 0;
    width: 100vw;
    box-shadow: none !important;
  }
}

/* High contrast mode (example for toggle) */
[data-contrast='high'] {
  --page-bg: #fff !important;
  --ink: #000 !important;
  --glass: #fff !important;
  --glass-strong: #fff !important;
  --border: #000 !important;
  --focus: #ff0 !important;
}

/* Hide visually but keep accessible for screen readers */
.visually-hidden {
  position: absolute !important;
  width: 1px; height: 1px;
  margin: -1px;
  padding: 0;
  border: 0; 
  overflow: hidden; 
  clip: rect(0 0 0 0); 
  white-space: nowrap;
}

/* Custom scrollbars for supported browsers */
::-webkit-scrollbar {
  width: 10px;
  background: var(--glass);
  border-radius: 10px;
}
::-webkit-scrollbar-thumb {
  background: var(--accent-1);
  border-radius: 10px;
}

</style>
<body>
  <header role="banner" class="site-header">
    <a href="#main-content" class="skip-link">Skip to content</a>
    <nav class="main-nav" aria-label="Main navigation">
      <ul>
        <li><a href="#science-section">Science</a></li>
        <li><a href="#philosophy-section">Philosophy</a></li>
        <li><a href="#tech-section">Technology</a></li>
        <li><a href="#literature-section">Literature</a></li>
      </ul>
    </nav>
    <h1 id="site-title">Glassbook</h1>
    <p id="site-desc" aria-describedby="site-title site-desc">A living, accessible broadsheet: science, philosophy, technology, literature.</p>
    <button id="toggle-theme" aria-label="Toggle dark / light mode" aria-pressed="false" tabindex="0">
      <span aria-hidden="true">üåó</span> Theme
    </button>
  </header>

  <main id="main-content" tabindex="-1" role="main">
    <!-- Flipbook -->
    <section id="flipbook" class="flipbook" aria-label="Flipbook pages" aria-live="polite">
      <!-- Example page structure -->
      <article class="book-page" id="science-section" tabindex="0" aria-labelledby="science-title">
        <h2 id="science-title">Science</h2>
        <p>Planck Time and Desire‚Äîon the smallest tick and the longest longing.</p>
      </article>

      <article class="book-page" id="philosophy-section" tabindex="0" aria-labelledby="philosophy-title">
        <h2 id="philosophy-title">Philosophy</h2>
        <p>Against Reduction‚Äîwhy not all meaning fits a metric.</p>
      </article>

      <article class="book-page" id="tech-section" tabindex="0" aria-labelledby="tech-title">
        <h2 id="tech-title">Technology</h2>
        <p>Edge Compute, Edge Culture‚Äîpresence near the margins.</p>
      </article>

      <article class="book-page" id="literature-section" tabindex="0" aria-labelledby="literature-title">
        <h2 id="literature-title">Literature</h2>
        <p>Footnotes to a Dream‚ÄîKafka, annotation, and the data of desire.</p>
      </article>
      
      <!-- More articles/pages here -->
    </section>

    <!-- Pagination/Navigation -->
    <nav class="pagination" aria-label="Pagination">
      <button class="prev-page" aria-label="Previous page" tabindex="0">&larr;</button>
      <span class="page-indicator" id="page-indicator" aria-live="polite">1/4</span>
      <button class="next-page" aria-label="Next page" tabindex="0">&rarr;</button>
    </nav>

    <!-- Search and Notes -->
    <section id="utility-section" aria-label="Search and notes">
      <form id="search-form" aria-label="Page search" autocomplete="off" role="search">
        <label for="search-input">Search</label>
        <input type="search" id="search-input" name="q" placeholder="Find ideas..." autocomplete="off" aria-autocomplete="list" aria-controls="search-results" />
        <button type="submit" aria-label="Start search">üîç</button>
        <ul id="search-results" role="listbox"></ul>
      </form>
      <button id="open-notes" aria-haspopup="dialog" aria-controls="notes-modal">Notes</button>
    </section>
  </main>

  <!-- Notes Modal/Overlay -->
  <dialog id="notes-modal" aria-modal="true" aria-labelledby="notes-title" hidden>
    <h2 id="notes-title">Notes</h2>
    <form method="dialog">
      <label for="user-notes">Write your note:</label>
      <textarea id="user-notes" rows="6" aria-label="Note entry"></textarea>
      <menu>
        <button value="cancel">Close</button>
        <button id="save-notes" value="default">Save</button>
      </menu>
    </form>
  </dialog>

  <!-- Footer -->
  <footer role="contentinfo" class="site-footer">
    <nav aria-label="Footer navigation">
      <ul>
        <li><a href="#site-title">Back to top</a></li>
        <li><a href="mailto:your@email.com">Contact</a></li>
        <li><a href="#accessibility-statement">Accessibility</a></li>
      </ul>
    </nav>
    <p>&copy; 2025 Your Name. All rights reserved.</p>
  </footer>
  
  <section id="accessibility-statement">
    <h3>Accessibility</h3>
    <p>This site aims to meet WCAG AA+ accessibility standards. <a href="mailto:your@email.com">Send feedback</a>.</p>
  </section>
  <!-- JS will be included in Part 3 -->
  <script>
// IIFE to protect global scope
(() => {
  'use strict';
  // Configurable selectors
  const themeBtn = document.getElementById('toggle-theme');
  const htmlTag = document.documentElement;
  const prevBtn = document.querySelector('.prev-page');
  const nextBtn = document.querySelector('.next-page');
  const pageIndicator = document.getElementById('page-indicator');
  const allPages = Array.from(document.querySelectorAll('.book-page'));
  const searchForm = document.getElementById('search-form');
  const searchInput = document.getElementById('search-input');
  const searchResults = document.getElementById('search-results');
  const notesModal = document.getElementById('notes-modal');
  const openNotesBtn = document.getElementById('open-notes');
  const saveNotesBtn = document.getElementById('save-notes');
  const notesArea = document.getElementById('user-notes');

  // Persistent state
  let currentPage = 0;
  const pageCount = allPages.length;

  // Load saved theme
  function loadTheme() {
    const theme = localStorage.getItem('glassbook-theme') || 'light';
    htmlTag.setAttribute('data-theme', theme);
    themeBtn.setAttribute('aria-pressed', theme === 'dark');
  }

  // Toggle dark mode
  function toggleTheme() {
    const isDark = htmlTag.getAttribute('data-theme') === 'dark';
    htmlTag.setAttribute('data-theme', isDark ? 'light' : 'dark');
    themeBtn.setAttribute('aria-pressed', !isDark);
    localStorage.setItem('glassbook-theme', isDark ? 'light' : 'dark');
  }

  themeBtn.addEventListener('click', toggleTheme);
  loadTheme();

  // Pagination navigation
  function updatePage() {
    allPages.forEach((pg, i) => {
      pg.style.display = i === currentPage ? 'block' : 'none';
      if (i === currentPage) pg.focus();
    });
    pageIndicator.textContent = `${currentPage + 1}/${pageCount}`;
  }

  function goNextPage() {
    if (currentPage < pageCount - 1) {
      currentPage++;
      updatePage();
    }
  }
  function goPrevPage() {
    if (currentPage > 0) {
      currentPage--;
      updatePage();
    }
  }
  nextBtn.addEventListener('click', goNextPage);
  prevBtn.addEventListener('click', goPrevPage);

  // Keyboard navigation (Arrow keys, PgUp/Dn, Home/End)
  document.addEventListener('keydown', (e) => {
    if(document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA') return;
    if (e.key === 'ArrowRight' || e.key === 'PageDown') goNextPage();
    if (e.key === 'ArrowLeft' || e.key === 'PageUp') goPrevPage();
    if (e.key === 'Home') { currentPage = 0; updatePage(); }
    if (e.key === 'End') { currentPage = pageCount - 1; updatePage(); }
  });

  // Initial page load
  updatePage();

  // Search functionality with ARIA live feedback
  searchForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const query = searchInput.value.trim().toLowerCase();
    if (!query) return;
    let results = [];
    allPages.forEach((pg, i) => {
      if (pg.textContent.toLowerCase().includes(query)) {
        results.push({page: i, extract: pg.textContent.slice(0, 120)});
      }
    });
    searchResults.innerHTML = '';
    if (results.length) {
      searchResults.style.display = 'block';
      results.forEach(res => {
        const li = document.createElement('li');
        li.setAttribute('role', 'option');
        li.textContent = `Page ${res.page + 1}: ${res.extract}...`;
        li.addEventListener('click', () => {
          currentPage = res.page;
          updatePage();
          searchResults.style.display = 'none';
        });
        searchResults.appendChild(li);
      });
    } else {
      const li = document.createElement('li');
      li.textContent = 'No results found.';
      searchResults.appendChild(li);
      searchResults.style.display = 'block';
    }
    searchResults.setAttribute('aria-live', 'assertive');
  });
  searchInput.addEventListener('blur', () => {
    setTimeout(()=>{searchResults.style.display = 'none';}, 200);
  });

  // Notes overlay management
  openNotesBtn.addEventListener('click', () => {
    notesModal.showModal();
    notesArea.focus();
    // Load saved notes
    const saved = localStorage.getItem('glassbook-notes') || '';
    notesArea.value = saved;
  });

  saveNotesBtn.addEventListener('click', (e) => {
    e.preventDefault();
    localStorage.setItem('glassbook-notes', notesArea.value);
    notesModal.close();
  });

  // ESC to close modal
  notesModal.addEventListener('keydown', (e) => {
    if(e.key === 'Escape'){
      notesModal.close();
    }
  });

  // Accessibility: trap focus in modal
  notesModal.addEventListener('focusout', (e) => {
    if (notesModal.open && !notesModal.contains(document.activeElement)) {
      notesArea.focus();
    }
  });

  // Announce important changes
  function announce(msg) {
    let live = document.getElementById('aria-live');
    if (!live) {
      live = document.createElement('div');
      live.id = 'aria-live';
      live.setAttribute('role', 'status');
      live.setAttribute('aria-live', 'polite');
      live.className = 'visually-hidden';
      document.body.appendChild(live);
    }
    live.textContent = msg;
  }
  // Example: announce on page change
  allPages.forEach(pg => {
    pg.addEventListener('focus', ()=> announce(`Page ${currentPage+1} of ${pageCount} loaded.`));
  });

  // Restore last session page
  if(localStorage.getItem('glassbook-page')) {
    currentPage = Math.max(0, Math.min(pageCount-1, Number(localStorage.getItem('glassbook-page'))));
    updatePage();
  }
  // Save page on move
  ['click','keydown'].forEach(ev => {
    document.addEventListener(ev, ()=>localStorage.setItem('glassbook-page',currentPage));
  });

})();
</script>

</body>
</html>






