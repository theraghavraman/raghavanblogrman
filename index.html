<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Glassbook ‚Äî Science ‚Ä¢ Philosophy ‚Ä¢ Technology ‚Ä¢ Literature</title>
  <meta name="description" content="A single-file accessible glassmorphic flipbook with realistic page turns, deep links, search-highlighting, thumbnails, notes, and print mode." />
  <!-- SEO & Social -->
  <meta property="og:title" content="Glassbook" />
  <meta property="og:description" content="Accessible glassmorphic flipbook." />
  <meta property="og:image" content="book-preview.jpg" />
  <meta property="og:type" content="article" />
  <link rel="manifest" href="manifest.json" />

  <style>
  :root{
    --page-bg: #eef3ff;
    --ink: #0f1533;
    --muted: #4e5b86;
    --glass: rgba(255,255,255,0.22);
    --glass-strong: rgba(255,255,255,0.35);
    --edge: rgba(255,255,255,0.55);
    --border: rgba(20,24,40,0.14);
    --shadow: rgba(15,21,51,0.22);
    --a1:#63b3ed; --a2:#a78bfa; --a3:#f472b6; --a4:#34d399; --a5:#f6ad55;
    --cat-science:#34d399; --cat-philo:#f472b6; --cat-tech:#63b3ed; --cat-lit:#a78bfa;
    --book-w: min(1100px, 94vw);
    --book-h: min(720px, 80vh);
    --gutter: 16px; --radius: 18px;
    --flip-dur: .8s; --sheet-thickness: 2px;
    --focus: #2251ff;
    --contrast-bg: #ffffff;
    --contrast-ink: #0b0e22;
    --hud-h: 56px;
  }
  :root[data-theme="dark"] {
    --page-bg: #101521;
    --ink: #f1f4ff;
    --glass: rgba(30,35,50,0.34);
    --glass-strong: rgba(30,35,50,0.54);
    --muted: #7888b5;
  }

  body, html {
    margin: 0; padding: 0;
    min-height: 100vh;
    background: var(--page-bg);
    color: var(--ink);
    font-family: system-ui, sans-serif;
  }
  header, main, nav, footer { display: block; }
  header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 1rem var(--gutter); background: var(--glass); backdrop-filter: blur(8px);
  }
  nav[aria-label] {
    display: flex; gap: .5em;
  }
  #darktoggle {
    font-size: 1.5em; background: none; border: none; cursor: pointer;
  }
  #search {
    margin: 1rem; display: block; padding: 0.5em; font-size: 1.1em;
    width: 50%; min-width: 240px; border-radius: var(--radius);
    border: 1px solid var(--border); background: var(--glass);
  }

  #book-content {
    margin: 0 auto;
    width: var(--book-w);
    min-height: var(--book-h);
    display: flex; flex-wrap: wrap; justify-content: center;
    gap: var(--gutter);
  }

  .page.glass {
    background: var(--glass);
    backdrop-filter: blur(8px);
    box-shadow: 0 8px 32px 0 var(--shadow), 0 1.5px 0 var(--edge);
    border-radius: var(--radius);
    border: 1.5px solid var(--border);
    margin: 1em 0;
    width: calc(var(--book-w)/1.1);
    min-height: 320px;
    padding: 2em 2em 3em 2em;
    transition: box-shadow .25s;
    position: relative;
  }
  .page.glass:hover, .page.glass:focus {
    box-shadow: 0 16px 48px 0 var(--shadow), 0 4px 0 var(--edge);
  }
  .page h2 { margin-top: 0; }
  .page textarea {
    width: 100%; font-size: 1em; margin: 0.7em 0 0 0;
    background: var(--glass-strong); min-height: 50px; border-radius: var(--radius);
    border: 1px solid var(--border); color: var(--ink); resize: vertical; display: block;
  }
  .page img {
    max-width: 80px; border-radius: var(--radius); box-shadow: 0 2px 8px var(--shadow);
    margin: 1em 0; display: block;
  }
  .page.flipping {
    animation: flipPage var(--flip-dur) cubic-bezier(.77,0,.175,1);
    transform-origin: left center;
  }
  @keyframes flipPage {
    0% { transform: rotateY(0deg); }
    100% { transform: rotateY(180deg); }
  }
  @media print {
    body { background: #fff !important; color: #222 !important; }
    header, nav, #darktoggle, #search, .controls { display: none !important; }
    .page.glass { background: #fff !important; box-shadow: none !important; border: none !important; }
  }

  #thumbnails {
    display: flex; gap: 1em; justify-content: center; margin: 1em 0;
  }
  #thumbnails img {
    max-width: 60px; cursor: pointer; opacity: 0.75; transition: opacity .18s;
  }
  #thumbnails img:hover, #thumbnails img:focus { opacity: 1; outline: 2px solid var(--focus); }

  button:focus { outline: 2px solid var(--focus); }

  footer {
    text-align: center;
    background: var(--glass);
    padding: 1rem var(--gutter);
    font-size: .98em;
    margin-top: 2em;
    border-top: 1px solid var(--border);
  }
  </style>
</head>
<body>
  <header>
    <h1>Glassbook</h1>
    <nav aria-label="Book navigation">
      <button accesskey="p" aria-label="Previous page" onclick="turnPage('prev')">‚ü® Prev</button>
      <button accesskey="n" aria-label="Next page" onclick="turnPage('next')">Next ‚ü©</button>
    </nav>
    <button id="darktoggle" aria-label="Toggle dark mode">üåô</button>
  </header>
  <input id="search" type="search" placeholder="Search your book‚Ä¶" oninput="highlight(this.value)" />

  <nav id="thumbnails" aria-label="Page thumbnails">
    <img src="science-thumb.webp" onclick="goToPage('science')" alt="Science" />
    <img src="philo-thumb.webp" onclick="goToPage('philosophy')" alt="Philosophy" />
    <img src="lit-thumb.webp" onclick="goToPage('literature')" alt="Literature" />
  </nav>

  <main id="book-content">
    <div class="page glass" id="science">
      <h2>Science</h2>
      <p>Cosmic wonders and quantum mysteries. <b>Explore the universe one page at a time.</b></p>
      <textarea placeholder="Add your notes‚Ä¶" oninput="saveNote('science', this.value)"></textarea>
      <img src="science-thumb.webp" alt="Science Thumbnail" />
    </div>
    <div class="page glass" id="philosophy">
      <h2>Philosophy</h2>
      <blockquote>‚ÄúThe unexamined life is not worth living.‚Äù ‚Äî Socrates</blockquote>
      <textarea placeholder="Add your notes‚Ä¶" oninput="saveNote('philosophy', this.value)"></textarea>
      <img src="philo-thumb.webp" alt="Philosophy Thumbnail" />
    </div>
    <div class="page glass" id="literature">
      <h2>Literature</h2>
      <p>Poems, stories, and the written word.</p>
      <textarea placeholder="Add your notes‚Ä¶" oninput="saveNote('literature', this.value)"></textarea>
      <img src="lit-thumb.webp" alt="Literature Thumbnail" />
    </div>
  </main>
  <footer>
    <p>Accessible Glassmorphic Flipbook. <span style="font-size:small;">Best viewed on modern browsers.</span></p>
  </footer>

  <script>
  // Dark mode toggle
  document.getElementById('darktoggle').onclick = function() {
    if (document.documentElement.getAttribute('data-theme') === 'dark'){
      document.documentElement.removeAttribute('data-theme');
    } else {
      document.documentElement.setAttribute('data-theme', 'dark');
    }
  };

  // Mobile swipe gestures for page turn
  let startX = 0;
  document.addEventListener('touchstart', e => startX = e.touches[0].clientX);
  document.addEventListener('touchend', e => {
    let dx = e.changedTouches[0].clientX - startX;
    if (dx > 40) turnPage('prev');
    if (dx < -40) turnPage('next');
  });

  // Dummy page turn - TO BE FILLED WITH LOGIC
  function turnPage(dir) {
    // Implement page flipping, navigation logic here
    alert("Page turn: " + dir);
  }

  // Thumbnail navigation
  function goToPage(pageId){
    location.hash = '#' + pageId;
    // Optionally scroll, focus, or animate to section
    let pg = document.getElementById(pageId);
    if(pg){ pg.scrollIntoView({behavior:'smooth'});}
  }

  // Search highlighting
  function highlight(text) {
    document.querySelectorAll('.page').forEach(pg => {
      pg.innerHTML = pg.innerHTML.replace(
        new RegExp(text, 'gi'), '<mark>$&</mark>'
      );
    });
  }

  // Notes per page using localStorage
  function saveNote(pageId, noteText) {
    localStorage.setItem('note_' + pageId, noteText);
  }
  function getNote(pageId) {
    return localStorage.getItem('note_' + pageId) || "";
  }
  // Load notes on page load (optional, you can expand this with event listeners)

  // PWA manifest & service worker (optional files needed to make full PWA)
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js');
  }
  </script>
</body>
</html>
